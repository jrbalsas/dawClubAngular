<!DOCTYPE html>
<html data-ng-app="clientesApp" lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Gestión Clientes</title>
        <link rel="stylesheet"  href="css/app.css"/>
        <!-- Angular Dependencies -->
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
        <!-- App modules -->
        <script src="js/app.js"></script>
        <script src="js/directives.js"></script>        
        <script src="js/services.js"></script>
        <script src="js/controllers.js"></script>        
    </head>
    <body  data-ng-controller="ClientesCtrl as $ctrl" ng-cloak>
        <h1>Gestión CRUD Clientes Angular</h1>
        <p>click en elemento para editar<p>
        <table>
            <tr data-ng-repeat="c in $ctrl.clientes" data-ng-click="$ctrl.edita(c.id)">
                <td ng-bind="c.id"></td><td ng-bind="c.nombre"></td><td ng-bind="c.dni"></td><td ng-bind="c.socio"></td>
            </tr>
        </table>
        <button data-ng-click="$ctrl.crea()">Nuevo</button>
        <a href="index.html">Inicio</a>
        <form novalidate class="form-css" name='frmClientes' data-ng-show='$ctrl.editMode'>
            <div class="err">
                <!-- Server validation errors -->
                <ul data-ng-show="$ctrl.errMsgs.length>0">
                    <li data-ng-repeat="err in $ctrl.errMsgs">
                        {{err.message}}
                    </li>
                </ul>
            </div>
            ID: <span data-ng-bind='$ctrl.cliente.id'></span><br/>
            Nombre: <input name='nombre' data-ng-model="$ctrl.cliente.nombre" required/>
            <span id="errNombre" class="err" ng-show='frmClientes.nombre.$dirty && !frmClientes.nombre.$valid'>
                El nombre es obligatorio
            </span><br/>
            DNI: <input name="Dni" data-ng-model="$ctrl.cliente.dni" ng-pattern='/^\d{7,8}(-?[a-z])?$/i'/>
            <span id="errDni" ng-show='frmClientes.Dni.$dirty && !frmClientes.Dni.$valid'>
                El DNI no es de la forma 12345678-A
            </span><br/>
            Socio: <input type="checkbox" id="ibSocio" data-ng-model="$ctrl.cliente.socio"/><br/>
            <button data-ng-click="$ctrl.guarda($ctrl.cliente)" data-ng-disabled='!frmClientes.$valid'>Guardar</button>
            <button data-ng-click="$ctrl.borra($ctrl.cliente.id)" data-ng-disabled='!($ctrl.cliente.id>0)'>Borrar</button>
            <button data-ng-click="$ctrl.reset()">Cancelar</button>
        </form>
        {{$ctrl.cliente.nombre}}
        <!-- Custom directive sample-->
        <cliente datos="$ctrl.cliente"/>    

    </body>
</html>
